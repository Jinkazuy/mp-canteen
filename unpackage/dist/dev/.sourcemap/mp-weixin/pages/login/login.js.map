{"version":3,"sources":["webpack:///J:/homeWorkFile/canteen-mp-new/main.js","webpack:///J:/homeWorkFile/canteen-mp-new/pages/login/login.vue?5c59","webpack:///J:/homeWorkFile/canteen-mp-new/pages/login/login.vue?050d","webpack:///J:/homeWorkFile/canteen-mp-new/pages/login/login.vue?2eb5","webpack:///J:/homeWorkFile/canteen-mp-new/pages/login/login.vue?9638","webpack:///J:/homeWorkFile/canteen-mp-new/pages/login/login.vue","webpack:///J:/homeWorkFile/canteen-mp-new/pages/login/login.vue?4923","webpack:///J:/homeWorkFile/canteen-mp-new/pages/login/login.vue?4f68"],"names":["createPage","Page","data","onLoginBTN","getPhoneBTN","errNum","onShow","onLoad","val","onLoadErrMsg","logOut","console","log","getSetting","onUnload","methods","Toast","loading","message","duration","uni","success","res","authSetting","getUserInfo","clear","setUserInfo","userInfo","loginAndGetToken","encryptedData","iv","bindGetUserInfo","e","target","detail","ifStoreUserPhone","store_UserInfoData","mobile","trim","nickName","backOnePage","bindgetphonenumber","phoneRes","login","loginRes","code","httpRes","getUD","setTimeout","navigateBack","delta","setToken","computed"],"mappings":"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","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=52642158&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('52642158')) {\n      api.createRecord('52642158', component.options)\n    } else {\n      api.reload('52642158', component.options)\n    }\n    module.hot.accept(\"./login.vue?vue&type=template&id=52642158&\", function () {\n      api.rerender('52642158', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"J:/homeWorkFile/canteen-mp-new/pages/login/login.vue\"\nexport default component.exports","export * from \"-!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=template&id=52642158&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = require(\"../../common/images/login/logo.png\")\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n// toast组件，拿到的不是组件，是方法；\n// 如此这般：Toast('我是提示文案，建议不超过十五字~');\nimport Toast from '../../wxcomponents/weapp/dist/toast/toast'\n\n// 拿到vuex中的函数\nimport {mapGetters, mapMutations} from 'vuex'\n// 引入自己封装的发送http请求的函数\nimport {http_login_setToken} from '../../utils/http/http_login_setToken.js'\nimport {http_getUserInfoData} from '../../utils/http/http_getUserInfoData.js'\nimport {http_getPhone} from '../../utils/http/http_getPhone.js'\nexport default {\n\tdata () {\n\t\treturn {\n\t\t\t// 授权按钮是否显示，当没有获取用户授权时，显示授权按钮\n\t\t\tonLoginBTN: false,\n\t\t\t// 获取用户手机号按钮\n\t\t\tgetPhoneBTN: false,\n\t\t\t// 登录时出现888的次数，超过5次就算是登录失败，这个原因是因为后台解析错误\n\t\t\terrNum: 0\n\t\t}\n\t},\n\t// 监听页面显示。\n\t// 页面每次出现在屏幕上都触发，包括从下级页面点返回露出当前页面\n\tasync onShow () {\n\n\t\t// 隐藏返回首页按钮，仅支持微信小程序\n\n\t\t// uni.hideHomeButton()\n\n\n\n\t\t\n\t},\n\t// 页面加载\n\tonLoad(val) {\n\t\tif(val.onLoadErrMsg){\n\t\t\tToast(val.onLoadErrMsg)\n\t\t}\n\t\t// 注销登录会传过来logOut===1，那么代表是注销后跳转到这里\n\t\t// 那么就不要进行自动登录操作；\n\t\tif(val.logOut && val.logOut==='1') {\n\t\t\tconsole.log('logOut')\n\t\t\t// 获取用户信息\n\t\t\tthis.onLoginBTN = true,\n\t\t\t// 获取用户手机号按钮\n\t\t\tthis.getPhoneBTN = false\n\t\t}\n\t\tif(!val.logOut) {\n\t\t\t/*\n\t\t\t* 页面功能逻辑：\n\t\t\t* 1、获取用户本地的信息\n\t\t\t* 2、获取到用户基本信息后 - 获取手机号\n\t\t\t* 3、获取手机号后 - 获取token，刷新token过期时间；\n\t\t\t*\n\t\t\t*\n\t\t\t*/\n\t\t\tthis.getSetting()\n\t\t}\n\t},\n\t// 页面卸载\n\tonUnload() {},\n\tmethods: {\n\n\t\t/*\n\t\t* 获取用户设置\n\t\t*/\n\t\tgetSetting () {\n\t\t\t\n\t\t\tToast.loading({\n\t\t\t\tmessage: '正在登陆....',\n\t\t\t\tduration: 0 // 展示时长(ms)，值为 0 时，toast 不会消失\n\t\t\t})\n\t\t\t\n\t\t\tuni.getSetting({\n\t\t\t  success: (res) => {\n\t\t\t\t\tif (res.authSetting[\"scope.userInfo\"]) {\n\t\t\t\t\t\tconsole.log('已获取用户“用户信息授权，直接获取用户信息（非敏感数据）”')\n\t\t\t\t\t\t// 用户已授权：用户信息\n\t\t\t\t\t\t// 获取用户信息\n\t\t\t\t\t\t// 这里禁止页面自动登录\n\t\t\t\t\t\tthis.getUserInfo()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tToast.clear()\n\t\t\t\t\t\tToast('需要您的授权')\n\t\t\t\t\t\t// 未授权用户信息,显示授权用户信息按钮，隐藏其他按钮；\n\t\t\t\t\t\tthis.onLoginBTN = true\n\t\t\t\t\t\tthis.getPhoneBTN = false\n\t\t\t\t\t}\n\t\t\t  }\n\t\t\t})\n\t\t},\n\n\n\t\t/**\n\t\t* 获取用户信息授权\n\t\t* 获取用户信息\n\t\t*/\n\t\tgetUserInfo () {\n\t\t\tuni.getUserInfo({\n\t\t\t  success: (res) => {\n\t\t\t\t\t// 获取成功，存本地\n\t\t\t\t\t// 将用户基本信息储存到本地，这步其实没什么用，因为用户登录后，会获取用户更详细的信息\n\t\t\t\t\tthis.setUserInfo(res.userInfo)\n\t\t\t\t\t\n\t\t\t\t\t// 获取token，将用户加密信息发送给后台\n\t\t\t\t\tthis.loginAndGetToken(res.encryptedData, res.iv)\n\t\t\t  }\n\t\t\t})\n\t\t},\n\n\n\n\t /**\n\t * @param obj[auto]\n\t * @return null\n\t * 备注：点击open-type=\"getUserInfo\"按钮时 触发@getuserinfo事件，将参数自动传递至bindGetUserInfo (e) 中\n\t */\n\t // 用户点击授权按钮后，弹出弹窗，然后在弹窗点取消或授权，会进入这个函数\n\t // 这个@getuserinfo是uniapp提供的处理事件，只适用于微信小程序，\n\t // 在点击这个按钮后，会触发bindGetUserInfo，然后拿到用户点击弹窗授权的回调函数\n\t // 不同于@click，这个@getuserinfo只能在用户授权的弹窗，当用户点击拒绝或接受才会触发这个事件，并且这个事件只能用在小程序\n\t\tbindGetUserInfo (e) {\n\t\t\t\tconsole.log(e)\n\t\t\t\tif (e.target.userInfo) {\n\t\t\t\t\tconsole.log(e.target.userInfo)\n\t\t\t\t\t\n\t\t\t\t\tToast.loading({\n\t\t\t\t\t\tmessage: '正在登陆....',\n\t\t\t\t\t\tduration: 0 // 展示时长(ms)，值为 0 时，toast 不会消失\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t// 拿到用户基本信息此时的操作，\n\t\t\t\t\t// 将用户基本信息储存到本地，这步其实没什么用，因为用户登录后，会获取用户更详细的信息\n\t\t\t\t\tthis.setUserInfo(e.target.userInfo)\n\n\t\t\t\t\t// 用户登录后，向后台换取token存储到本地\n\t\t\t\t\t// 这里不去效验本地是否有token，因为：用户信息可能更新、变动，\n\t\t\t\t\t// 所以，这里把当前操作用户的加密数据发送给后台，后台解码后将用户信息和最终登录日期等数据入库；\n\t\t\t\t\tthis.loginAndGetToken(e.detail.encryptedData, e.detail.iv)\n\n\n\t\t\t\t} else {\n\t\t\t\t\tToast('需要您的授权才能登录')\n\t\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t* 检查本地是否能获取用户手机号\n\t\t*/\n\t\tasync ifStoreUserPhone () {\n\t\t\t// 用户基本信息和详细信息中都有手机号\n\t\t\t\n\t\t\tif ((this.store_UserInfoData.mobile.trim()) !== '' && this.store_UserInfoData.mobile!==null) {\n\t\t\t\t\tconsole.log('拿到手机号，本地用户手机号↓')\n\t\t\t\t\tconsole.log(this.store_UserInfoData.mobile)\n\t\t\t\t\t// 拿到用户信息、拿到手机号，登录\n\t\t\t\t\t// 检查本地用户信息，这里就用用户名做检测，如果手机号、用户新都存在，那么视为登录\n\t\t\t\t\tif( this.store_UserInfoData.nickName!==null && this.store_UserInfoData.nickName!==\"\") {\n\t\t\t\t\t\tthis.backOnePage()\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// 本地用户手机号为空\n\t\t\t\t\tthis.getPhoneBTN = true\n\t\t\t\t\tToast('请允许获取您的手机号')\n\t\t\t\t\tconsole.log('本地手机号获取为空，显示获取手机号按钮')\n\t\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @param obj[auto]\n\t\t * @return null\n\t\t * 备注：点击open-type=\"getPhoneNumber\"按钮时 触发@getphonenumber事件，将参数自动传递至bindgetphonenumber (e) 中\n\t\t*/\n\t\tasync bindgetphonenumber (e) {\n\t\t\tconsole.log('用户点击获取手机号按钮')\n\t\t\tconsole.log(e)\n\t\t\tif (e.detail.encryptedData) {\n\t\t\t\tconsole.log('用户授权手机号，拿到加密数据，发送给后台换取手机号')\n\t\t\t\tlet phoneRes = await http_getPhone(e.detail.encryptedData, e.detail.iv)\n\t\t\t\t\n\t\t\t\tif (phoneRes) {\n\t\t\t\t\t// 等待换取手机号结束，检测本地手机号\n\t\t\t\t\tthis.ifStoreUserPhone()\n\t\t\t\t} else {\n\t\t\t\t\tToast('伺服器正在调整，暂不提供登录，抱歉')\n\t\t\t\t\tconsole.log('服务器解码手机号失败')\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tToast('请您授权获取手机号')\n\t\t\t\tconsole.log('用户拒绝授权获取手机号')\n\t\t\t}\n\t\t},\n\n\t\t/*\n\t\t* 获取token，将用户加密信息发送给后台\n\t\t*/\n\t\tasync loginAndGetToken (encryptedData, iv) {\n\t\t\t// 用户登录后，向后台换取token存储到本地\n\t\t\tuni.login({\n\t\t\t  success: async (loginRes) => {\n\t\t\t\t  \n\t\t\t\t\t// 拿到用户登录Code，发送给后台，后台返回token值，将token存储到本地中；\n\t\t\t\t\tif (loginRes.code) {\n\t\t\t\t\t\tconsole.log('登录，获取token')\n\t\t\t\t\t\tlet httpRes = await http_login_setToken(loginRes.code, encryptedData, iv)\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 登录失败\n\t\t\t\t\t\tconsole.log(httpRes)\n\t\t\t\t\t\tif(!httpRes) {\n\t\t\t\t\t\t\t// 显示登录按钮，隐藏其他按钮\n\t\t\t\t\t\t\tthis.onLoginBTN = true\n\t\t\t\t\t\t\tthis.getPhoneBTN = false\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tToast.clear()\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tToast('登录失败')\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t} else if(httpRes===888 && this.errNum<6) {\n\t\t\t\t\t\t\tconsole.log('微信解码出错')\n\t\t\t\t\t\t\tthis.errNum++\n\t\t\t\t\t\t\tthis.getUserInfo ()\n\t\t\t\t\t\t} else if(httpRes===888 && this.errNum>=6) {\n\t\t\t\t\t\t\t// 显示登录按钮，隐藏其他按钮\n\t\t\t\t\t\t\tthis.onLoginBTN = true\n\t\t\t\t\t\t\tthis.getPhoneBTN = false\n\t\t\t\t\t\t\tthis.errNum = 0\n\t\t\t\t\t\t\tToast.clear()\n\t\t\t\t\t\t\tToast('登录失败，code888')\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 登录成功，执行获取手机号步骤\n\t\t\t\t\t\t\t// 登录 & 获取token成功\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 获取token成功后，获取用户详细数据\n\t\t\t\t\t\t\tlet getUD = await http_getUserInfoData()\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 如果获取用户详细信息成功，就判断是否有手机号\n\t\t\t\t\t\t\tif(getUD) {\n\t\t\t\t\t\t\t\t// 如果获取到的用户详细信息中没有手机号，说明用户之前登陆没有设置手机号，其实逻辑上是不通的，应该是设置手机号了\n\t\t\t\t\t\t\t\tif((this.store_UserInfoData.mobile.trim()) === '' || this.store_UserInfoData.mobile === null ) {\n\t\t\t\t\t\t\t\t\tToast.clear()\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 显示获取手机号\n\t\t\t\t\t\t\t\t\tthis.onLoginBTN = false\n\t\t\t\t\t\t\t\t\tthis.getPhoneBTN = true\n\t\t\t\t\t\t\t\t\t// 然后检测本地用户手机号\n\t\t\t\t\t\t\t\t\tthis.ifStoreUserPhone()\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 进入到里，此时，用户信息、用户手机号、token都获取成功，进行跳转回上一页\n\t\t\t\t\t\t\t\t\tif( this.store_UserInfoData.nickName!==null) {\n\t\t\t\t\t\t\t\t\t\tthis.backOnePage()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t  }\n\t\t\t})\n\t\t},\n\t\tbackOnePage() {\n\t\t\tToast.success({\n\t\t\t\tmessage: '登录成功'\n\t\t\t})\n\t\t\tsetTimeout(()=>{\n\t\t\t\tuni.navigateBack({\n\t\t\t\t    delta: 1\n\t\t\t\t})\n\t\t\t},2000)\n\t\t},\n\t\t...mapMutations({\n\t\t        // 这里映射了这个方法，那么在调用x的时候，就等于使用了this.$store.commit('SET_SINGER', value)这个方法；\n\t\t        setUserInfo: 'setUserInfo',\n\t\t\t\tsetToken: 'setToken'\n\t\t})\n\t},\n\tcomputed: {\n\t\t// vuex提供的辅助函数，拿到store/getters.js向外暴露的内容；\n\t\t...mapGetters([\n\t\t\t'store_UserInfo',\n\t\t\t'store_UserInfoData', // 用户详细数据\n\t\t\t'store_token',\n\t\t\t'store_UserPhone'\n\t\t])\n\t}\n}\n","import mod from \"-!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--11-oneOf-1-0!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-1!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--11-oneOf-1-2!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--11-oneOf-1-3!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\stylus-loader\\\\index.js??ref--11-oneOf-1-4!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-5!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--11-oneOf-1-0!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-1!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--11-oneOf-1-2!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--11-oneOf-1-3!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\stylus-loader\\\\index.js??ref--11-oneOf-1-4!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-5!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=style&index=0&lang=stylus&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}