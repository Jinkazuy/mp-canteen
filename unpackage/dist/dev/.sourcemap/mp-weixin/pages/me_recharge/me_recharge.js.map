{"version":3,"sources":["webpack:///J:/homeWorkFile/canteen-mp-new/main.js","webpack:///J:/homeWorkFile/canteen-mp-new/pages/me_recharge/me_recharge.vue?8c70","webpack:///J:/homeWorkFile/canteen-mp-new/pages/me_recharge/me_recharge.vue?af4e","webpack:///J:/homeWorkFile/canteen-mp-new/pages/me_recharge/me_recharge.vue?2e59","webpack:///J:/homeWorkFile/canteen-mp-new/pages/me_recharge/me_recharge.vue?4560","webpack:///J:/homeWorkFile/canteen-mp-new/pages/me_recharge/me_recharge.vue","webpack:///J:/homeWorkFile/canteen-mp-new/pages/me_recharge/me_recharge.vue?48f3","webpack:///J:/homeWorkFile/canteen-mp-new/pages/me_recharge/me_recharge.vue?77d3"],"names":["createPage","Page","data","userBalance","moneyNum","payOBJ","columns","pickerShowFlag","isOrtherMoney","onShow","userB","console","log","store_userBalance","xx","methods","onRecharge","islogin","uni","navigateTo","url","store_UserInfoData","openId","datas","money","openid","body","Toast","loading","message","duration","reRes","code","callPayment","selectMoney","num","onChange","event","detail","Number","value","pickerShow","onClose","getServiceProvider","serviceP","requestPayment","provider","timeStamp","nonceStr","package","prepay_id","signType","paySign","_debug","success","res","errMsg","virtualAccountRes","clear","fail","err","Promise","resolve","reject","getProvider","service","openRecordPage","complete","computed"],"mappings":"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","file":"pages/me_recharge/me_recharge.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/me_recharge/me_recharge.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./me_recharge.vue?vue&type=template&id=57d87dde&\"\nvar renderjs\nimport script from \"./me_recharge.vue?vue&type=script&lang=js&\"\nexport * from \"./me_recharge.vue?vue&type=script&lang=js&\"\nimport style0 from \"./me_recharge.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('57d87dde')) {\n      api.createRecord('57d87dde', component.options)\n    } else {\n      api.reload('57d87dde', component.options)\n    }\n    module.hot.accept(\"./me_recharge.vue?vue&type=template&id=57d87dde&\", function () {\n      api.rerender('57d87dde', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"J:/homeWorkFile/canteen-mp-new/pages/me_recharge/me_recharge.vue\"\nexport default component.exports","export * from \"-!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./me_recharge.vue?vue&type=template&id=57d87dde&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./me_recharge.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./me_recharge.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\n// 判断用户是否登录\r\nimport {isLogin} from '@/utils/utils.js'\r\n// 微信支付\r\nimport {http_toPay} from '@/utils/http/http_toPay.js'\r\n// 充值到虚拟账户\r\nimport {http_recharge} from '@/utils/http/http_recharge.js'\r\nimport {mapGetters} from 'vuex'\r\nimport Toast from '../../wxcomponents/weapp/dist/toast/toast'\r\n// 获取用户余额\r\nimport {http_getUserBalance} from '@/utils/http/http_getUserBalance.js'\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// 用户余额\r\n\t\t\tuserBalance: -1,\r\n\t\t\tmoneyNum: -1, // 充值金额\r\n\t\t\t// 付款对象\r\n\t\t\tpayOBJ: {},\r\n\t\t\t// 可选择金额\r\n\t\t\tcolumns: ['300', '400', '500', '600', '700', '800', '900', '1000'],\r\n\t\t\t// 金额滚动条是否显示\r\n\t\t\tpickerShowFlag: false,\r\n\t\t\t// 当前用户是否选择其他金额\r\n\t\t\tisOrtherMoney: false\r\n\t\t\t\r\n\t\t}\r\n\t},\r\n\tasync onShow() {\r\n\t\t// 获取用户余额\r\n\t\tlet userB = await http_getUserBalance()\r\n\t\tconsole.log('刷新余额')\r\n\t\tconsole.log(userB)\r\n\t\tif(!userB) {\r\n\t\t\tToast('获取余额信息失败，刷新重试')\r\n\t\t} else {\r\n\t\t\tthis.userBalance = store_userBalance.xx.xx\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t// 测试\r\n\t\t// let virtualAccountRes = await http_recharge(1)\r\n\t\t// console.log(virtualAccountRes)\r\n\t},\r\n\tmethods: {\r\n\t\tasync onRecharge() {\r\n\t\t\t\r\n\t\t\tlet islogin = await isLogin()\r\n\t\t\tif(!islogin) {\r\n\t\t\t\t// 用户未登录，跳转到登录页\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t// 跳转路径\r\n\t\t\t\t\t// 摊位列表页\r\n\t\t\t\t\turl: '../../pages/login/login'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconsole.log('充值按钮')\r\n\t\t\tconsole.log('openid=> ' + this.store_UserInfoData.openId)\r\n\t\t\tconsole.log('充值金额=> ' + this.moneyNum + '元')\r\n\t\t\t\r\n\t\t\tlet datas = {\r\n\t\t\t\tmoney: this.moneyNum * 100, // 这里的money字段 金额，按分计算，10就是一毛钱 100就是1块钱，所以这列*100\r\n\t\t\t\topenid: this.store_UserInfoData.openId,\r\n\t\t\t\tbody: '餐厅充值'\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tToast.loading({\r\n\t\t\t\tmessage: '支付中...',\r\n\t\t\t\tduration: 0\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tlet reRes = await http_toPay(datas)\r\n\t\t\tif(reRes.code==0) {\r\n\t\t\t\t// reRes.data:{\r\n\t\t\t\t// \tnonceStr: \"kOlz3qbSVDkhZWqJ\"\r\n\t\t\t\t// \tpaySign: \"BC9EE61F215608C63C604EB343F58166\"\r\n\t\t\t\t// \tprepay_id: \"wx011859292692943c47a4a7881249020900\"\r\n\t\t\t\t// \tsignType: \"MD5\"\r\n\t\t\t\t// \ttimeStamp: \"1583060368\"\r\n\t\t\t\t// }\r\n\t\t\t\tthis.payOBJ = reRes.data\r\n\t\t\t\t// 调用发起支付的方法\r\n\t\t\t\tthis.callPayment()\r\n\t\t\t} else {\r\n\t\t\t\tToast('支付失败')\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 跟立魏协同测试\r\n\t\t\t// uni.request({\r\n\t\t\t// \turl: 'http://jtxhkh.natappfree.cc/pay/wx/payment?token=befecada0d7cbd2e355f7356a2518153',\r\n\t\t\t// \tdata: datas,\r\n\t\t\t// \tmethod: 'POST',\r\n\t\t\t// \tsuccess: (res) => {\r\n\t\t\t// \t\tconsole.log('充值结果')\r\n\t\t\t// \t\tif(res.statusCode==200) {\r\n\t\t\t// \t\t\tconsole.log(res.data)\r\n\t\t\t// \t\t\t// res.data↓\r\n\t\t\t// \t\t\t// data:{\r\n\t\t\t// \t\t\t// \tnonceStr: \"kOlz3qbSVDkhZWqJ\"\r\n\t\t\t// \t\t\t// \tpaySign: \"BC9EE61F215608C63C604EB343F58166\"\r\n\t\t\t// \t\t\t// \tprepay_id: \"wx011859292692943c47a4a7881249020900\"\r\n\t\t\t// \t\t\t// \tsignType: \"MD5\"\r\n\t\t\t// \t\t\t// \ttimeStamp: \"1583060368\"\r\n\t\t\t// \t\t\t// }\r\n\t\t\t// \t\t\t// message: \"Success!\"\r\n\t\t\t// \t\t\t// msg: \"统一下单成功!\"\r\n\t\t\t// \t\t\t// status: 200\r\n\t\t\t// \t\t\tif(res.data.status==200) {\r\n\t\t\t// \t\t\t\tthis.payOBJ = res.data.data\r\n\t\t\t// \t\t\t\t// 调用发起支付的方法\r\n\t\t\t// \t\t\t\tthis.callPayment()\r\n\t\t\t// \t\t\t}\r\n\t\t\t// \t\t}\r\n\t\t\t// \t},\r\n\t\t\t// \tfail: (err)=>{\r\n\t\t\t// \t\tconsole.log('失败')\r\n\t\t\t// \t\tconsole.log(err)\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\t\t\t\r\n\t\t},\r\n\t\t// 选择金额\r\n\t\tselectMoney(num) {\r\n\t\t\t\r\n\t\t\tthis.moneyNum = num\r\n\t\t\t\r\n\t\t\t// 当前用户是否选择其他金额\r\n\t\t\tthis.isOrtherMoney = false\r\n\t\t},\r\n\t\t// 选择金额  其他金额滚动条\r\n\t\tonChange(event) {\r\n\t\t    console.log(event.detail)\r\n\t\t\tthis.moneyNum = Number(event.detail.value)\r\n\t\t },\r\n\t\t // 滚动选择金额展示、隐藏\r\n\t\t pickerShow() {\r\n\t\t\t this.pickerShowFlag = !this.pickerShowFlag\r\n\t\t\t \r\n\t\t\t // 当前用户是否选择其他金额\r\n\t\t\t this.isOrtherMoney = true\r\n\t\t },\r\n\t\t onClose() {\r\n\t\t\t console.log('隐藏上拉框')\r\n\t\t\t this.pickerShowFlag = false\r\n\t\t },\r\n\t\t// 发起支付\r\n\t\tasync callPayment() {\r\n\t\t\tlet serviceP = await this.getServiceProvider()\r\n\t\t\t\r\n\t\t\tconsole.log('支付对象↓')\r\n\t\t\tconsole.log(this.payOBJ)\r\n\t\t\tif(serviceP!==false) {\r\n\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\tprovider: serviceP,\t// String \t是 \t服务提供商，通过 uni.getProvider 获取。\r\n\t\t\t\t\t// orderInfo: ,\t// String/Object \t是 \t订单数据，注意事项\r\n\t\t\t\t\t\r\n\t\t\t\t\ttimeStamp: this.payOBJ.timeStamp,\t// String \t微信小程序必填 \t时间戳从1970年1月1日至今的秒数，即当前的时间。\r\n\t\t\t\t\tnonceStr: this.payOBJ.nonceStr,\t// String \t微信小程序必填 \t随机字符串，长度为32个字符以下。。\r\n\t\t\t\t\tpackage: 'prepay_id=' + this.payOBJ.prepay_id,\t// String \t微信小程序必填 \t统一下单接口返回的 prepay_id 参数值，提交格式如：prepay_id=xx。\r\n\t\t\t\t\tsignType: this.payOBJ.signType,\t// String \t微信小程序必填 \t签名算法，暂支持 MD5。\r\n\t\t\t\t\tpaySign: this.payOBJ.paySign,\t// String \t微信小程序必填 \t签名，具体签名方案参见 微信小程序支付文档\r\n\t\t\t\t\t\r\n\t\t\t\t\t// bannedChannels: ,\t// Array<String> \t否 \t需要隐藏的支付方式，详见 百度小程序支付文档\r\n\t\t\t\t\t// service: ,\t// Number \t头条小程序必填\r\n\t\t\t\t\t_debug: 0,\t// Number \t否 \t仅限调试用，上线前去掉该参数。_debug=1时，微信支付期间可以看到中间报错信息，方便调试\r\n\t\t\t\t\t// getOrderStatus: ,\t//  Function \t头条小程序必填\r\n\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(res.errMsg == 'requestPayment:ok') {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 微信支付成功，此时要向后台发起充值到虚拟账户的请求，\r\n\t\t\t\t\t\t\t// 因为此时的微信支付，是支付到微信上，不是在虚拟账户中，\r\n\t\t\t\t\t\t\t// 所以微信支付成功后，还要向虚拟账户充值\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlet virtualAccountRes = await http_recharge(this.moneyNum)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(virtualAccountRes.code==0) {\r\n\t\t\t\t\t\t\t\tconsole.log('支付成功')\r\n\t\t\t\t\t\t\t\tToast.clear()\r\n\t\t\t\t\t\t\t\tToast('充值成功')\r\n\t\t\t\t\t\t\t\t// 此时重新获取用户余额等信息\r\n\t\t\t\t\t\t\t\tlet userB = await http_getUserBalance()\r\n\t\t\t\t\t\t\t\tconsole.log('刷新余额')\r\n\t\t\t\t\t\t\t\tconsole.log(userB)\r\n\t\t\t\t\t\t\t\tif(!userB) {\r\n\t\t\t\t\t\t\t\t\tToast('获取余额信息失败，刷新重试')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} ,\r\n\t\t\t\t\tfail: async (err) => {\r\n\t\t\t\t\t\tconsole.log('支付失败')\r\n\t\t\t\t\t\tToast.clear()\r\n\t\t\t\t\t\tToast('支付失败')\r\n\t\t\t\t\t\tlet userB = await http_getUserBalance()\r\n\t\t\t\t\t\tconsole.log('刷新余额')\r\n\t\t\t\t\t\tconsole.log(userB)\r\n\t\t\t\t\t\tif(!userB) {\r\n\t\t\t\t\t\t\tToast('获取余额信息失败，刷新重试')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t// 发起支付前，获取支付服务商\r\n\t\tgetServiceProvider() {\r\n\t\t\treturn new Promise(async (resolve, reject) => {\r\n\t\t\t\t\r\n\t\t\t\tawait uni.getProvider({\r\n\t\t\t\t\tservice: 'payment',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif(res.errMsg == 'getProvider:ok') {\r\n\t\t\t\t\t\t\tconsole.log(res.provider[0])\r\n\t\t\t\t\t\t\tresolve(res.provider[0])\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tresolve(false)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tresolve(false)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 打开充值记录页\r\n\t\topenRecordPage() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '../../pages/me_recharge_record/me_recharge_record',\r\n\t\t\t\tcomplete (res) {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters([\r\n\t\t\t'store_UserInfoData', // 用户信息\r\n\t\t\t'store_userBalance',  // 用于余额信息\r\n\t\t])\r\n\t}\r\n}\r\n","import mod from \"-!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--11-oneOf-1-0!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-1!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--11-oneOf-1-2!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--11-oneOf-1-3!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\stylus-loader\\\\index.js??ref--11-oneOf-1-4!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-5!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./me_recharge.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--11-oneOf-1-0!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-1!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--11-oneOf-1-2!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--11-oneOf-1-3!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\stylus-loader\\\\index.js??ref--11-oneOf-1-4!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-5!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!L:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./me_recharge.vue?vue&type=style&index=0&lang=stylus&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}